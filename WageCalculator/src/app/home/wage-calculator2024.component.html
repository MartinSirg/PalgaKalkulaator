<div style="display: flex; gap: 5rem; flex-wrap: wrap">
  <div class="input-container">
    <div>
      <label for="gross-pay">Bruto palk: &nbsp;</label>
      <input [formControl]="wageForm.controls.grossPay" id="gross-pay" type="number">
    </div>

    <div>
      <label for="income-tax">Tulumaksu protsent: &nbsp;</label>
      <select id="income-tax" [formControl]="wageForm.controls.incomeTaxPercentage">
        <option value="20">20%</option>
        <option value="22">22%</option>
        <option value="24">24%</option>
      </select>
  </div>

    <div>
      <label for="third-pillar-amount">III samba makse otse palgast: &nbsp;</label>
      <input [formControl]="wageForm.controls.thirdPillarAmount" id="third-pillar-amount" type="number">
      @if (wageResult(); as result){
        <p *ngIf="result.type == 'success' && result.thirdPillarTaxFreeAmount < (wageFormValue()?.thirdPillarAmount ?? 0)">
          Info: III samba soovitud makse on suurem kui maksimaalne maksuvaba summa. Raamatupidamine kannab pensionifondi ainult maksuvaba summa.
        </p>
      }
    </div>

    <div>
      <label for="retirementFee">II samba %: &nbsp;</label>
      <select id="retirementFee" [formControl]="wageForm.controls.retirementFeePercentage">
        <option value="0">0%</option>
        <option value="2">2%</option>
<!--        <option value="4">4%</option>-->
<!--        <option value="6">6%</option>-->
      </select>
    </div>
    <div>
      <label for="use-income-tax-free-minimum">Kasuta tulumaksuvaba miinimumi:</label>
      <input [formControl]="wageForm.controls.useIncomeTaxFreeMinimum" id="use-income-tax-free-minimum" type="checkbox">
    </div>
    @if (wageResult(); as result){
      <div *ngIf="result.type === 'error'">Viga: {{result.errorReason}}</div>
    }
  </div>

  <div class="result-table-container" *ngIf="wageResult() as wageResult">
    <table class="result-table" style="white-space: nowrap">
      <tr>
        <th>Category</th>
        <th>Amount</th>
        <th>Percentage</th>
      </tr>
      <tr>
        <td><strong>Neto palk:</strong></td>
        @if (wageResult.type == 'success'){
          <td>{{wageResult.netPay | number : "1.2-2"}}</td>
          <td>{{wageResult.netPayPercentage | number : "1.2-2"}}%</td>
        } @else {
          <td>{{0 | number : "1.2-2"}}</td>
          <td>{{0 | number : "1.2-2"}}%</td>
        }
      </tr>
      <tr>
        <td><strong>II samba kogumispension (töötaja panus):</strong></td>
        @if (wageResult.type == 'success'){
          <td>{{wageResult.secondPillarEmployeeAmount | number : "1.2-2"}}</td>
          <td>{{wageResult.secondPillarEmployeePercentage | number : "1.2-2"}}%</td>
        } @else {
          <td>{{0 | number : "1.2-2"}}</td>
          <td>{{0 | number : "1.2-2"}}%</td>
        }
      </tr>
      <tr>
        <td><strong>II samba kogumispension (riigi panus):</strong></td>
        @if (wageResult.type == 'success'){
          <td>{{wageResult.secondPillarNationalAmount | number : "1.2-2"}}</td>
          <td>{{wageResult.secondPillarNationalPercentage | number : "1.2-2"}}%</td>
        } @else {
          <td>{{0 | number : "1.2-2"}}</td>
          <td>{{0 | number : "1.2-2"}}%</td>
        }
      </tr>
      <tr>
        <td><strong>III samba kogumispension:</strong></td>
        @if (wageResult.type == 'success'){
          <td>{{wageResult.thirdPillarAmount | number : "1.2-2"}}</td>
          <td>{{wageResult.thirdPillarPercentage | number : "1.2-2"}}%</td>
        } @else {
          <td>{{0 | number : "1.2-2"}}</td>
          <td>{{0 | number : "1.2-2"}}%</td>
        }
      </tr>
      <tr>
        <td><strong>Kogu panus pensionisse:</strong></td>
        @if (wageResult.type == 'success'){
          <td>{{wageResult.totalPensionContributionAmount | number : "1.2-2"}}</td>
          <td>{{wageResult.totalPensionContributionPercentage | number : "1.2-2"}}%</td>
        } @else {
          <td>{{0 | number : "1.2-2"}}</td>
          <td>{{0 | number : "1.2-2"}}%</td>
        }
      </tr>
      <tr>
        <td><strong>Tulumaks:</strong></td>
        @if (wageResult.type == 'success'){
          <td>{{wageResult.incomeTax | number : "1.2-2"}}</td>
          <td>{{wageResult.incomeTaxPercentage | number : "1.2-2"}}%</td>
        } @else {
          <td>{{0 | number : "1.2-2"}}</td>
          <td>{{0 | number : "1.2-2"}}%</td>
        }
      </tr>
      <tr>
        <td><strong>Töötuskindlustusmakse:</strong></td>
        @if (wageResult.type == 'success'){
          <td>{{wageResult.unemploymentFee | number : "1.2-2"}}</td>
          <td>{{wageResult.unemploymentFeePercentage | number : "1.2-2"}}%</td>
        } @else {
          <td>{{0 | number : "1.2-2"}}</td>
          <td>{{0 | number : "1.2-2"}}%</td>
        }
      </tr>
      <tr>
        <td><strong>III samba tulumaksuvabastus:</strong></td>
        @if (wageResult.type == 'success'){
          <td>{{wageResult.thirdPillarTaxFreeAmount | number : "1.2-2"}}</td>
        } @else {
          <td>{{0 | number : "1.2-2"}}</td>
        }
        <td></td>
      </tr>
      <tr>
        <td><strong>Tulumaksuvaba miinimum:</strong></td>
        @if (wageResult.type == 'success'){
          <td>{{wageResult.incomeTaxFreeAmount | number : "1.2-2"}}</td>
        } @else {
          <td>{{0 | number : "1.2-2"}}</td>
        }
        <td></td>
      </tr>
      <tr>
        <td><strong>Checksum:</strong></td>
        @if (wageResult.type == 'success'){
          <td>{{wageResult.checkSum | number : "1.2-2"}}</td>
        } @else {
          <td>{{0 | number : "1.2-2"}}</td>
        }
        <td></td>
      </tr>
    </table>
  </div>
</div>

